model.summary$LOS_u = 100 - model.summary$LOS_l
model.summary[model.summary$`2.5%` > 0,]
model.summary[model.summary$`97.5%` < 0,]
model.summary[model.summary$LOS_l > 95,]
model.summary[model.summary$LOS_l < 5,]
write.csv(model.summary, "outputs/Model_sum.csv")
####
library(rethinking)
library(data.table)
rm(list=ls(all=TRUE))
# Functions
LOS <- function(x=NULL){
out =   (length(which(x > 0)) / length(x))*100
return(round(out, 3))
}
###########################################################################################################
# First get the data
getwd()
setwd("~/Dropbox/Jaime M/Projects_JM/FSU/Pool_manipulation/KG_git/")
center = 18
# Guppy data cleaning -----------------------------------------------------
Gdata <- read.csv("data/GuppyIPM.csv")
Kdata <- read.csv("data/KillifishIPM.csv")
Gdata$z <- Gdata$SL1_mm - center
Gdata$z1 <- Gdata$SL2_mm
Gdata <- Gdata[-which(Gdata$Sex2=="M"),]
# Make sure the non reproductive have zeros
Gdata$Recr[which(Gdata$Repr==0 & Gdata$surv ==1)] = 0
# Killifish data cleaning -------------------------------------------------
Kdata$z <- Kdata$SL1_mm - center
Kdata$z1 <- Kdata$SL2_mm
Kdata <- Kdata[-which(Kdata$Sex2=="M"),]
# Make sure the non reproductive have zeros
Kdata$Recr[which(Kdata$Repr==0 & Kdata$surv ==1)] = 0
# Normalize the covariates (killifish biomass and canopy) -----------------
Gdata$FishBiom <- Gdata$BiomassG1 + Gdata$BiomassK1
Kdata$FishBiom <- Kdata$BiomassG1 + Kdata$BiomassK1
library(ddply)
library("dplyr")
names(Gdata)
ddply(Gdata,c('site','Location','Pool_1'),summarise,N=mean(area))
library("dplyr")
names(Gdata)
ddply(Gdata,c('site','Location','Pool_1'),summarise,N=mean(area))
library("plyr")
ddply(Gdata,c('site','Location','Pool_1'),summarise,N=mean(area))
library("plyr")
df = cbind(Gdata[,c("site", "Location", "Pool_1", "area", "FishBiom", "canopy")])
df = cbind(Gdata[,c("site", "Location", "Pool_1", "area", "FishBiom", "canopy")], Gdata[,c("site", "Location", "Pool_1", "area", "FishBiom", "canopy")])
ddply(df,c('site','Location','Pool_1'),summarise,N=mean(area))
df = cbind(Gdata[,c("site", "Location", "Pool_1", "area", "FishBiom", "canopy")], Gdata[,c("site", "Location", "Pool_1", "area", "FishBiom", "canopy")])
df = cbind(Gdata[,c("site", "Location", "Pool_1", "area", "FishBiom", "canopy")], Kdata[,c("site", "Location", "Pool_1", "area", "FishBiom", "canopy")])
df = rbind(Gdata[,c("site", "Location", "Pool_1", "area", "FishBiom", "canopy")], Kdata[,c("site", "Location", "Pool_1", "area", "FishBiom", "canopy")])
ddply(df,c('site','Location','Pool_1'),summarise,N=mean(area))
ddply(df,c('site','Location','Pool_1'),summarise,N=mean(c(area, FishBiom)))
ddply(df,c('site','Location','Pool_1'),summarise, area=mean(area), Biomass=mean(FishBiom))
ddply(df,c('site','Location','Pool_1'),summarise, area=mean(area), Biomass=mean(FishBiom), canopy=mean(canopy))
means = ddply(df,c('site','Location','Pool_1'),summarise, area=mean(area), Biomass=mean(FishBiom), canopy=mean(canopy))
means = ddply(df,c('site','Location','Pool_1'),summarise, area=mean(area), Biomass=mean(FishBiom), canopy=mean(canopy))
sds =  ddply(df,c('site','Location','Pool_1'),summarise, area=mean(area), Biomass=sd(FishBiom), canopy=sd(canopy))
sds
sds =  ddply(df,c('site','Location','Pool_1'),summarise, area=sd(area), Biomass=sd(FishBiom), canopy=sd(canopy))
sds
means = ddply(df,c('Location','Pool_1'),summarise, area=mean(area), Biomass=mean(FishBiom), canopy=mean(canopy))
sd = ddply(df,c('Location','Pool_1'),summarise, area=sd(area), Biomass=sd(FishBiom), canopy=sd(canopy))
means = ddply(df,c('Location','Pool_1'),summarise, area=mean(area), Biomass=mean(FishBiom), canopy=mean(canopy))
sd = ddply(df,c('Location','Pool_1'),summarise, area=sd(area), Biomass=sd(FishBiom), canopy=sd(canopy))
sd
df = ddply(df,c('site','Location','Pool_1'),summarise, area=mean(area), Biomass=mean(FishBiom), canopy=mean(canopy))
means = ddply(df,c('Location','Pool_1'),summarise, area=mean(area), Biomass=mean(FishBiom), canopy=mean(canopy))
means = ddply(df,c('Location','Pool_1'),summarise, area=mean(area), Biomass=mean(Biomass), canopy=mean(canopy))
means
means = ddply(df,c('Location'),summarise, area=mean(area), Biomass=mean(Biomass), canopy=mean(canopy))
means
sd = ddply(df,c('Location'),summarise, area=sd(area), Biomass=sd(Biomass), canopy=sd(canopy))
sd
means = ddply(df,c('Location'),summarise, mean_area=mean(area), mean_Biomass=mean(Biomass), mean_canopy=mean(canopy))
sd = ddply(df,c('Location'),summarise, sd_area=sd(area), sd_Biomass=sd(Biomass), sd_canopy=sd(canopy))
sd
merge(Gdata, means, by.x = "Location")
d = merge(Gdata, means, by.x = "Location")
Gdata = merge(Gdata, means, by.x = "Location")
Gdata = merge(Gdata, sd, by.x = "Location")
Kdata = merge(Kdata, means, by.x = "Location")
Kdata = merge(Kdata, sd, by.x = "Location")
####
library(rethinking)
library(data.table)
rm(list=ls(all=TRUE))
# Functions
LOS <- function(x=NULL){
out =   (length(which(x > 0)) / length(x))*100
return(round(out, 3))
}
###########################################################################################################
# First get the data
getwd()
setwd("~/Dropbox/Jaime M/Projects_JM/FSU/Pool_manipulation/KG_git/")
center = 18
# Guppy data cleaning -----------------------------------------------------
Gdata <- read.csv("data/GuppyIPM.csv")
Kdata <- read.csv("data/KillifishIPM.csv")
Gdata$z <- Gdata$SL1_mm - center
Gdata$z1 <- Gdata$SL2_mm
Gdata <- Gdata[-which(Gdata$Sex2=="M"),]
# Make sure the non reproductive have zeros
Gdata$Recr[which(Gdata$Repr==0 & Gdata$surv ==1)] = 0
# Killifish data cleaning -------------------------------------------------
Kdata$z <- Kdata$SL1_mm - center
Kdata$z1 <- Kdata$SL2_mm
Kdata <- Kdata[-which(Kdata$Sex2=="M"),]
# Make sure the non reproductive have zeros
Kdata$Recr[which(Kdata$Repr==0 & Kdata$surv ==1)] = 0
# Normalize the covariates (killifish biomass and canopy) -----------------
Gdata$FishBiom <- Gdata$BiomassG1 + Gdata$BiomassK1
Kdata$FishBiom <- Kdata$BiomassG1 + Kdata$BiomassK1
library("plyr")
names(Gdata)
df = rbind(Gdata[,c("site", "Location", "Pool_1", "area", "FishBiom", "canopy")], Kdata[,c("site", "Location", "Pool_1", "area", "FishBiom", "canopy")])
df = ddply(df,c('site','Location','Pool_1'),summarise, area=mean(area), Biomass=mean(FishBiom), canopy=mean(canopy))
means = ddply(df,c('Location'),summarise, mean_area=mean(area), mean_Biomass=mean(Biomass), mean_canopy=mean(canopy))
sd = ddply(df,c('Location'),summarise, sd_area=sd(area), sd_Biomass=sd(Biomass), sd_canopy=sd(canopy))
Gdata = merge(Gdata, means, by.x = "Location")
Gdata = merge(Gdata, sd, by.x = "Location")
Kdata = merge(Kdata, means, by.x = "Location")
Kdata = merge(Kdata, sd, by.x = "Location")
Gdata$area <- (Gdata$area - Gdata$mean_area) /  Gdata$sd_area
Kdata$area <- (Kdata$area - Kdata$mean_area) /  Kdata$sd_area
####
library(rethinking)
library(data.table)
rm(list=ls(all=TRUE))
# Functions
LOS <- function(x=NULL){
out =   (length(which(x > 0)) / length(x))*100
return(round(out, 3))
}
###########################################################################################################
# First get the data
getwd()
setwd("~/Dropbox/Jaime M/Projects_JM/FSU/Pool_manipulation/KG_git/")
center = 18
# Guppy data cleaning -----------------------------------------------------
Gdata <- read.csv("data/GuppyIPM.csv")
Kdata <- read.csv("data/KillifishIPM.csv")
Gdata$z <- Gdata$SL1_mm - center
Gdata$z1 <- Gdata$SL2_mm
Gdata <- Gdata[-which(Gdata$Sex2=="M"),]
# Make sure the non reproductive have zeros
Gdata$Recr[which(Gdata$Repr==0 & Gdata$surv ==1)] = 0
# Killifish data cleaning -------------------------------------------------
Kdata$z <- Kdata$SL1_mm - center
Kdata$z1 <- Kdata$SL2_mm
Kdata <- Kdata[-which(Kdata$Sex2=="M"),]
# Make sure the non reproductive have zeros
Kdata$Recr[which(Kdata$Repr==0 & Kdata$surv ==1)] = 0
# Normalize the covariates (killifish biomass and canopy) -----------------
Gdata$FishBiom <- Gdata$BiomassG1 + Gdata$BiomassK1
Kdata$FishBiom <- Kdata$BiomassG1 + Kdata$BiomassK1
library("plyr")
names(Gdata)
df = rbind(Gdata[,c("site", "Location", "Pool_1", "area", "FishBiom", "canopy")], Kdata[,c("site", "Location", "Pool_1", "area", "FishBiom", "canopy")])
df = ddply(df,c('site','Location','Pool_1'),summarise, area=mean(area), Biomass=mean(FishBiom), canopy=mean(canopy))
means = ddply(df,c('Location'),summarise, mean_area=mean(area), mean_Biomass=mean(Biomass), mean_canopy=mean(canopy))
sd = ddply(df,c('Location'),summarise, sd_area=sd(area), sd_Biomass=sd(Biomass), sd_canopy=sd(canopy))
Gdata = merge(Gdata, means, by.x = "Location")
Gdata = merge(Gdata, sd, by.x = "Location")
Kdata = merge(Kdata, means, by.x = "Location")
Kdata = merge(Kdata, sd, by.x = "Location")
Gdata$FishBiom <- (Gdata$FishBiom - Gdata$mean_Biomass) /  Gdata$sd_Biomass
Kdata$FishBiom <- (Kdata$FishBiom - Kdata$mean_Biomass) /  Kdata$sd_Biomass
Gdata$area <- (Gdata$area - Gdata$mean_area) /  Gdata$sd_area
Kdata$area <- (Kdata$area - Kdata$mean_area) /  Kdata$sd_area
Gdata$canopy <- (Gdata$canopy - Gdata$mean_canopy) /  Gdata$sd_canopy
Kdata$canopy <- (Kdata$canopy - Kdata$mean_canopy) /  Kdata$sd_canopy
####
library(rethinking)
library(data.table)
rm(list=ls(all=TRUE))
# Functions
LOS <- function(x=NULL){
out =   (length(which(x > 0)) / length(x))*100
return(round(out, 3))
}
###########################################################################################################
# First get the data
getwd()
setwd("~/Dropbox/Jaime M/Projects_JM/FSU/Pool_manipulation/KG_git/")
center = 18
# Guppy data cleaning -----------------------------------------------------
Gdata <- read.csv("data/GuppyIPM.csv")
Kdata <- read.csv("data/KillifishIPM.csv")
Gdata$z <- Gdata$SL1_mm - center
Gdata$z1 <- Gdata$SL2_mm
Gdata <- Gdata[-which(Gdata$Sex2=="M"),]
# Make sure the non reproductive have zeros
Gdata$Recr[which(Gdata$Repr==0 & Gdata$surv ==1)] = 0
# Killifish data cleaning -------------------------------------------------
Kdata$z <- Kdata$SL1_mm - center
Kdata$z1 <- Kdata$SL2_mm
Kdata <- Kdata[-which(Kdata$Sex2=="M"),]
# Make sure the non reproductive have zeros
Kdata$Recr[which(Kdata$Repr==0 & Kdata$surv ==1)] = 0
# Normalize the covariates (killifish biomass and canopy) -----------------
Gdata$FishBiom <- Gdata$BiomassG1 + Gdata$BiomassK1
Kdata$FishBiom <- Kdata$BiomassG1 + Kdata$BiomassK1
library("plyr")
names(Gdata)
df = rbind(Gdata[,c("site", "Location", "Pool_1", "area", "FishBiom", "canopy")], Kdata[,c("site", "Location", "Pool_1", "area", "FishBiom", "canopy")])
df = ddply(df,c('site','Location','Pool_1'),summarise, area=mean(area), Biomass=mean(FishBiom), canopy=mean(canopy))
means = ddply(df,c('Location'),summarise, mean_area=mean(area), mean_Biomass=mean(Biomass), mean_canopy=mean(canopy))
sd = ddply(df,c('Location'),summarise, sd_area=sd(area), sd_Biomass=sd(Biomass), sd_canopy=sd(canopy))
Gdata = merge(Gdata, means, by.x = "Location")
Gdata = merge(Gdata, sd, by.x = "Location")
Kdata = merge(Kdata, means, by.x = "Location")
Kdata = merge(Kdata, sd, by.x = "Location")
####
library(rethinking)
library(data.table)
rm(list=ls(all=TRUE))
# Functions
LOS <- function(x=NULL){
out =   (length(which(x > 0)) / length(x))*100
return(round(out, 3))
}
###########################################################################################################
# First get the data
getwd()
setwd("~/Dropbox/Jaime M/Projects_JM/FSU/Pool_manipulation/KG_git/")
center = 18
# Guppy data cleaning -----------------------------------------------------
Gdata <- read.csv("data/GuppyIPM.csv")
Kdata <- read.csv("data/KillifishIPM.csv")
Gdata$z <- Gdata$SL1_mm - center
Gdata$z1 <- Gdata$SL2_mm
Gdata <- Gdata[-which(Gdata$Sex2=="M"),]
# Make sure the non reproductive have zeros
Gdata$Recr[which(Gdata$Repr==0 & Gdata$surv ==1)] = 0
# Killifish data cleaning -------------------------------------------------
Kdata$z <- Kdata$SL1_mm - center
Kdata$z1 <- Kdata$SL2_mm
Kdata <- Kdata[-which(Kdata$Sex2=="M"),]
# Make sure the non reproductive have zeros
Kdata$Recr[which(Kdata$Repr==0 & Kdata$surv ==1)] = 0
# Normalize the covariates (killifish biomass and canopy) -----------------
Gdata$FishBiom <- Gdata$BiomassG1 + Gdata$BiomassK1
Kdata$FishBiom <- Kdata$BiomassG1 + Kdata$BiomassK1
Gdata$Density <-( Gdata$BiomassG1 + Gdata$BiomassK1) / Gdata$area
Kdata$Density <- (Kdata$BiomassG1 + Kdata$BiomassK1) / Kdata$area
df = rbind(Gdata[,c("site", "Location", "Pool_1", "area", "FishBiom", "canopy", "Density")], Kdata[,c("site", "Location", "Pool_1", "area", "FishBiom", "Density")])
####
library(rethinking)
library(data.table)
rm(list=ls(all=TRUE))
# Functions
LOS <- function(x=NULL){
out =   (length(which(x > 0)) / length(x))*100
return(round(out, 3))
}
###########################################################################################################
# First get the data
getwd()
setwd("~/Dropbox/Jaime M/Projects_JM/FSU/Pool_manipulation/KG_git/")
center = 18
# Guppy data cleaning -----------------------------------------------------
Gdata <- read.csv("data/GuppyIPM.csv")
Kdata <- read.csv("data/KillifishIPM.csv")
Gdata$z <- Gdata$SL1_mm - center
Gdata$z1 <- Gdata$SL2_mm
Gdata <- Gdata[-which(Gdata$Sex2=="M"),]
# Make sure the non reproductive have zeros
Gdata$Recr[which(Gdata$Repr==0 & Gdata$surv ==1)] = 0
# Killifish data cleaning -------------------------------------------------
Kdata$z <- Kdata$SL1_mm - center
Kdata$z1 <- Kdata$SL2_mm
Kdata <- Kdata[-which(Kdata$Sex2=="M"),]
# Make sure the non reproductive have zeros
Kdata$Recr[which(Kdata$Repr==0 & Kdata$surv ==1)] = 0
# Normalize the covariates (killifish biomass and canopy) -----------------
Gdata$FishBiom <- Gdata$BiomassG1 + Gdata$BiomassK1
Kdata$FishBiom <- Kdata$BiomassG1 + Kdata$BiomassK1
Gdata$Density <-( Gdata$BiomassG1 + Gdata$BiomassK1) / Gdata$area
Kdata$Density <- (Kdata$BiomassG1 + Kdata$BiomassK1) / Kdata$area
df = rbind(Gdata[,c("site", "Location", "Pool_1", "area", "FishBiom", "canopy", "Density")], Kdata[,c("site", "Location", "Pool_1", "area", "FishBiom", "Density")])
####
library(rethinking)
library(data.table)
rm(list=ls(all=TRUE))
# Functions
LOS <- function(x=NULL){
out =   (length(which(x > 0)) / length(x))*100
return(round(out, 3))
}
###########################################################################################################
# First get the data
getwd()
setwd("~/Dropbox/Jaime M/Projects_JM/FSU/Pool_manipulation/KG_git/")
center = 18
# Guppy data cleaning -----------------------------------------------------
Gdata <- read.csv("data/GuppyIPM.csv")
Kdata <- read.csv("data/KillifishIPM.csv")
Gdata$z <- Gdata$SL1_mm - center
Gdata$z1 <- Gdata$SL2_mm
Gdata <- Gdata[-which(Gdata$Sex2=="M"),]
# Make sure the non reproductive have zeros
Gdata$Recr[which(Gdata$Repr==0 & Gdata$surv ==1)] = 0
# Killifish data cleaning -------------------------------------------------
Kdata$z <- Kdata$SL1_mm - center
Kdata$z1 <- Kdata$SL2_mm
Kdata <- Kdata[-which(Kdata$Sex2=="M"),]
# Make sure the non reproductive have zeros
Kdata$Recr[which(Kdata$Repr==0 & Kdata$surv ==1)] = 0
# Normalize the covariates (killifish biomass and canopy) -----------------
Gdata$FishBiom <- Gdata$BiomassG1 + Gdata$BiomassK1
Kdata$FishBiom <- Kdata$BiomassG1 + Kdata$BiomassK1
Gdata$Density <-( Gdata$BiomassG1 + Gdata$BiomassK1) / Gdata$area
Kdata$Density <- (Kdata$BiomassG1 + Kdata$BiomassK1) / Kdata$area
names(Gdata)
df = rbind(Gdata[,c("site", "Location", "Pool_1", "area", "FishBiom", "canopy", "Density")], Kdata[,c("site", "Location", "Pool_1", "area", "FishBiom", "Density")])
df = rbind(Gdata[,c("site", "Location", "Pool_1", "area", "FishBiom", "canopy", "Density")], Kdata[,c("site", "Location", "Pool_1", "area", "FishBiom", "Density")])
####
library(rethinking)
library(data.table)
rm(list=ls(all=TRUE))
# Functions
LOS <- function(x=NULL){
out =   (length(which(x > 0)) / length(x))*100
return(round(out, 3))
}
###########################################################################################################
# First get the data
getwd()
setwd("~/Dropbox/Jaime M/Projects_JM/FSU/Pool_manipulation/KG_git/")
center = 18
# Guppy data cleaning -----------------------------------------------------
Gdata <- read.csv("data/GuppyIPM.csv")
Kdata <- read.csv("data/KillifishIPM.csv")
Gdata$z <- Gdata$SL1_mm - center
Gdata$z1 <- Gdata$SL2_mm
Gdata <- Gdata[-which(Gdata$Sex2=="M"),]
# Make sure the non reproductive have zeros
Gdata$Recr[which(Gdata$Repr==0 & Gdata$surv ==1)] = 0
# Killifish data cleaning -------------------------------------------------
Kdata$z <- Kdata$SL1_mm - center
Kdata$z1 <- Kdata$SL2_mm
Kdata <- Kdata[-which(Kdata$Sex2=="M"),]
# Make sure the non reproductive have zeros
Kdata$Recr[which(Kdata$Repr==0 & Kdata$surv ==1)] = 0
# Normalize the covariates (killifish biomass and canopy) -----------------
Gdata$FishBiom <- Gdata$BiomassG1 + Gdata$BiomassK1
Kdata$FishBiom <- Kdata$BiomassG1 + Kdata$BiomassK1
Gdata$Density <-( Gdata$BiomassG1 + Gdata$BiomassK1) / Gdata$area
Kdata$Density <- (Kdata$BiomassG1 + Kdata$BiomassK1) / Kdata$area
Gdata[,c("site", "Location", "Pool_1", "area", "FishBiom", "canopy", "Density")]
Kdata[,c("site", "Location", "Pool_1", "area", "FishBiom", "Density")]
df = rbind(Gdata[,c("site", "Location", "Pool_1", "area", "FishBiom", "canopy", "Density")], Kdata[,c("site", "Location", "Pool_1", "area", "FishBiom", "Density")])
vars = c("site", "Location", "Pool_1", "area", "FishBiom", "canopy", "Density")
df = rbind(Gdata[,vars], Kdata[,vars])
df = ddply(df,c('site','Location','Pool_1'),summarise, area=mean(area), Biomass=mean(FishBiom), canopy=mean(canopy), Density = mean(Density))
means = ddply(df,c('Location'),summarise, mean_area=mean(area), mean_Biomass=mean(Biomass), mean_canopy=mean(canopy), mean_Density(Density))
means = ddply(df,c('Location'),summarise, mean_area=mean(area), mean_Biomass=mean(Biomass), mean_canopy=mean(canopy), mean_Density= mean(Density))
sd = ddply(df,c('Location'),summarise, sd_area=sd(area), sd_Biomass=sd(Biomass), sd_canopy=sd(canopy), mean_Density= mean(Density))
####
library(rethinking)
library(data.table)
rm(list=ls(all=TRUE))
# Functions
LOS <- function(x=NULL){
out =   (length(which(x > 0)) / length(x))*100
return(round(out, 3))
}
###########################################################################################################
# First get the data
getwd()
setwd("~/Dropbox/Jaime M/Projects_JM/FSU/Pool_manipulation/KG_git/")
center = 18
# Guppy data cleaning -----------------------------------------------------
Gdata <- read.csv("data/GuppyIPM.csv")
Kdata <- read.csv("data/KillifishIPM.csv")
Gdata$z <- Gdata$SL1_mm - center
Gdata$z1 <- Gdata$SL2_mm
Gdata <- Gdata[-which(Gdata$Sex2=="M"),]
# Make sure the non reproductive have zeros
Gdata$Recr[which(Gdata$Repr==0 & Gdata$surv ==1)] = 0
# Killifish data cleaning -------------------------------------------------
Kdata$z <- Kdata$SL1_mm - center
Kdata$z1 <- Kdata$SL2_mm
Kdata <- Kdata[-which(Kdata$Sex2=="M"),]
# Make sure the non reproductive have zeros
Kdata$Recr[which(Kdata$Repr==0 & Kdata$surv ==1)] = 0
# Normalize the covariates (killifish biomass and canopy) -----------------
Gdata$FishBiom <- Gdata$BiomassG1 + Gdata$BiomassK1
Kdata$FishBiom <- Kdata$BiomassG1 + Kdata$BiomassK1
Gdata$Density <-( Gdata$BiomassG1 + Gdata$BiomassK1) / Gdata$area
Kdata$Density <- (Kdata$BiomassG1 + Kdata$BiomassK1) / Kdata$area
library("plyr")
names(Gdata)
vars = c("site", "Location", "Pool_1", "area", "FishBiom", "canopy", "Density")
df = rbind(Gdata[,vars], Kdata[,vars])
df = ddply(df,c('site','Location','Pool_1'),summarise, area=mean(area), Biomass=mean(FishBiom), canopy=mean(canopy), Density = mean(Density))
means = ddply(df,c('Location'),summarise, mean_area=mean(area), mean_Biomass=mean(Biomass), mean_canopy=mean(canopy), mean_Density= mean(Density))
sd = ddply(df,c('Location'),summarise, sd_area=sd(area), sd_Biomass=sd(Biomass), sd_canopy=sd(canopy), mean_Density= mean(Density))
Gdata = merge(Gdata, means, by.x = "Location")
Gdata = merge(Gdata, sd, by.x = "Location")
####
library(rethinking)
library(data.table)
rm(list=ls(all=TRUE))
# Functions
LOS <- function(x=NULL){
out =   (length(which(x > 0)) / length(x))*100
return(round(out, 3))
}
###########################################################################################################
# First get the data
getwd()
setwd("~/Dropbox/Jaime M/Projects_JM/FSU/Pool_manipulation/KG_git/")
center = 18
# Guppy data cleaning -----------------------------------------------------
Gdata <- read.csv("data/GuppyIPM.csv")
Kdata <- read.csv("data/KillifishIPM.csv")
Gdata$z <- Gdata$SL1_mm - center
Gdata$z1 <- Gdata$SL2_mm
Gdata <- Gdata[-which(Gdata$Sex2=="M"),]
# Make sure the non reproductive have zeros
Gdata$Recr[which(Gdata$Repr==0 & Gdata$surv ==1)] = 0
# Killifish data cleaning -------------------------------------------------
Kdata$z <- Kdata$SL1_mm - center
Kdata$z1 <- Kdata$SL2_mm
Kdata <- Kdata[-which(Kdata$Sex2=="M"),]
# Make sure the non reproductive have zeros
Kdata$Recr[which(Kdata$Repr==0 & Kdata$surv ==1)] = 0
# Normalize the covariates (killifish biomass and canopy) -----------------
Gdata$FishBiom <- Gdata$BiomassG1 + Gdata$BiomassK1
Kdata$FishBiom <- Kdata$BiomassG1 + Kdata$BiomassK1
Gdata$Density <-( Gdata$BiomassG1 + Gdata$BiomassK1) / Gdata$area
Kdata$Density <- (Kdata$BiomassG1 + Kdata$BiomassK1) / Kdata$area
library("plyr")
names(Gdata)
vars = c("site", "Location", "Pool_1", "area", "FishBiom", "canopy", "Density")
df = rbind(Gdata[,vars], Kdata[,vars])
df = ddply(df,c('site','Location','Pool_1'),summarise, area=mean(area), Biomass=mean(FishBiom), canopy=mean(canopy), Density = mean(Density))
means = ddply(df,c('Location'),summarise, mean_area=mean(area), mean_Biomass=mean(Biomass), mean_canopy=mean(canopy), mean_Density= mean(Density))
sd = ddply(df,c('Location'),summarise, sd_area=sd(area), sd_Biomass=sd(Biomass), sd_canopy=sd(canopy), mean_Density= mean(Density))
sd
means
means = ddply(df,c('Location'),summarise, mean_area=mean(area), mean_Biomass=mean(Biomass), mean_canopy=mean(canopy), mean_Density= mean(Density))
sd = ddply(df,c('Location'),summarise, sd_area=sd(area), sd_Biomass=sd(Biomass), sd_canopy=sd(canopy), sd_Density= sd(Density))
Gdata = merge(Gdata, means, by.x = "Location")
Gdata = merge(Gdata, sd, by.x = "Location")
Kdata = merge(Kdata, means, by.x = "Location")
Kdata = merge(Kdata, sd, by.x = "Location")
Gdata$FishBiom <- (Gdata$FishBiom - Gdata$mean_Biomass) /  Gdata$sd_Biomass
Kdata$FishBiom <- (Kdata$FishBiom - Kdata$mean_Biomass) /  Kdata$sd_Biomass
Gdata$area <- (Gdata$area - Gdata$mean_area) /  Gdata$sd_area
Kdata$area <- (Kdata$area - Kdata$mean_area) /  Kdata$sd_area
Gdata$canopy <- (Gdata$canopy - Gdata$mean_canopy) /  Gdata$sd_canopy
Kdata$canopy <- (Kdata$canopy - Kdata$mean_canopy) /  Kdata$sd_canopy
Gdata$Density <- (Gdata$Density - Gdata$mean_Density) /  Gdata$sd_Density
Kdata$Density <- (Kdata$Density - Kdata$mean_Density) /  Kdata$sd_Density
####
library(rethinking)
library(data.table)
rm(list=ls(all=TRUE))
# Functions
LOS <- function(x=NULL){
out =   (length(which(x > 0)) / length(x))*100
return(round(out, 3))
}
###########################################################################################################
# First get the data
getwd()
setwd("~/Dropbox/Jaime M/Projects_JM/FSU/Pool_manipulation/KG_git/")
center = 18
# Guppy data cleaning -----------------------------------------------------
Gdata <- read.csv("data/GuppyIPM.csv")
Kdata <- read.csv("data/KillifishIPM.csv")
Gdata$z <- Gdata$SL1_mm - center
Gdata$z1 <- Gdata$SL2_mm
Gdata <- Gdata[-which(Gdata$Sex2=="M"),]
# Make sure the non reproductive have zeros
Gdata$Recr[which(Gdata$Repr==0 & Gdata$surv ==1)] = 0
# Killifish data cleaning -------------------------------------------------
Kdata$z <- Kdata$SL1_mm - center
Kdata$z1 <- Kdata$SL2_mm
Kdata <- Kdata[-which(Kdata$Sex2=="M"),]
# Make sure the non reproductive have zeros
Kdata$Recr[which(Kdata$Repr==0 & Kdata$surv ==1)] = 0
# Normalize the covariates (killifish biomass and canopy) -----------------
Gdata$FishBiom <- Gdata$BiomassG1 + Gdata$BiomassK1
Kdata$FishBiom <- Kdata$BiomassG1 + Kdata$BiomassK1
Gdata$Density <-( Gdata$BiomassG1 + Gdata$BiomassK1) / Gdata$area
Kdata$Density <- (Kdata$BiomassG1 + Kdata$BiomassK1) / Kdata$area
library("plyr")
names(Gdata)
vars = c("site", "Location", "Pool_1", "area", "FishBiom", "canopy", "Density")
df = rbind(Gdata[,vars], Kdata[,vars])
df = ddply(df,c('site','Location','Pool_1'),summarise, area=mean(area), Biomass=mean(FishBiom), canopy=mean(canopy), Density = mean(Density))
means = ddply(df,c('Location'),summarise, mean_area=mean(area), mean_Biomass=mean(Biomass), mean_canopy=mean(canopy), mean_Density= mean(Density))
sd = ddply(df,c('Location'),summarise, sd_area=sd(area), sd_Biomass=sd(Biomass), sd_canopy=sd(canopy), sd_Density= sd(Density))
Gdata = merge(Gdata, means, by.x = "Location")
Gdata = merge(Gdata, sd, by.x = "Location")
Kdata = merge(Kdata, means, by.x = "Location")
Kdata = merge(Kdata, sd, by.x = "Location")
Gdata$FishBiom <- (Gdata$FishBiom - Gdata$mean_Biomass) /  Gdata$sd_Biomass
Kdata$FishBiom <- (Kdata$FishBiom - Kdata$mean_Biomass) /  Kdata$sd_Biomass
Gdata$area <- (Gdata$area - Gdata$mean_area) /  Gdata$sd_area
Kdata$area <- (Kdata$area - Kdata$mean_area) /  Kdata$sd_area
Gdata$canopy <- (Gdata$canopy - Gdata$mean_canopy) /  Gdata$sd_canopy
Kdata$canopy <- (Kdata$canopy - Kdata$mean_canopy) /  Kdata$sd_canopy
Gdata$Density <- (Gdata$Density - Gdata$mean_Density) /  Gdata$sd_Density
Kdata$Density <- (Kdata$Density - Kdata$mean_Density) /  Kdata$sd_Density
